{% extends "base.html" %}

{% block title %}ðŸŒ¸ FlowBuddy - Cycle Settings{% endblock %}

{% block content %}
<!-- 3D Animated Cycle Settings Page -->
<div class="min-h-screen relative overflow-hidden">
    <!-- Animated Background -->
    <div class="absolute inset-0 bg-gradient-to-br from-pink-100 via-purple-100 to-peach-100"></div>
    
    <!-- Floating Elements -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <!-- Floating Hearts -->
        <div class="floating-heart-1 absolute top-20 left-10 text-pink-300 text-4xl animate-bounce">ðŸ’–</div>
        <div class="floating-heart-2 absolute top-40 right-20 text-purple-300 text-3xl animate-pulse">ðŸŒ¸</div>
        <div class="floating-heart-3 absolute bottom-40 left-20 text-pink-400 text-5xl animate-bounce">âœ¨</div>
        <div class="floating-heart-4 absolute bottom-20 right-10 text-purple-400 text-3xl animate-pulse">ðŸŒº</div>
        <div class="floating-heart-5 absolute top-60 left-1/4 text-pink-300 text-4xl animate-bounce">ðŸ’•</div>
        
        <!-- Floating Circles -->
        <div class="absolute top-32 left-1/3 w-4 h-4 bg-pink-200 rounded-full animate-ping"></div>
        <div class="absolute bottom-32 right-1/3 w-6 h-6 bg-purple-200 rounded-full animate-ping"></div>
        <div class="absolute top-1/2 left-1/4 w-3 h-3 bg-peach-200 rounded-full animate-ping"></div>
    </div>
    
    <!-- Main Content -->
    <div class="relative z-10 flex items-center justify-center min-h-screen px-4 py-8">
        <div class="w-full max-w-2xl">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="inline-block mb-6">
                    <div class="w-20 h-20 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center shadow-2xl transform hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-calendar-alt text-white text-2xl"></i>
                    </div>
                </div>
                <h1 class="text-4xl font-script text-pink-600 mb-2">Cycle Settings</h1>
                <p class="text-gray-600 text-lg">Let's personalize your FlowBuddy experience âœ¨</p>
            </div>
            
            <!-- Settings Card -->
            <div class="card-hover bg-white/90 backdrop-blur-md rounded-3xl p-8 shadow-2xl border border-pink-100">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-script text-pink-600 mb-2">Tell us about your cycle ðŸŒ¸</h2>
                    <p class="text-gray-500">This helps us provide accurate predictions and reminders</p>
                </div>
                
                <form method="POST" class="space-y-8">
                    <!-- Last Period Start Date -->
                    <div class="space-y-4">
                        <label class="block text-lg font-medium text-pink-600">
                            <i class="fas fa-calendar-day mr-2"></i>When did your last period start?
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fas fa-calendar text-pink-400"></i>
                            </div>
                            <input type="date" name="start_date" required 
                                   value="{{ cycle_settings.start_date.strftime('%Y-%m-%d') if cycle_settings else '' }}"
                                   class="w-full pl-12 pr-4 py-4 border-2 border-pink-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 bg-white/80 backdrop-blur-sm">
                        </div>
                    </div>
                    
                    <!-- Cycle Length -->
                    <div class="space-y-4">
                        <label class="block text-lg font-medium text-pink-600">
                            <i class="fas fa-clock mr-2"></i>How long is your cycle typically?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="cycle-option bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-4 border-2 border-pink-200 hover:border-pink-400 transition-all duration-300 cursor-pointer" data-value="21">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">21</div>
                                    <div class="text-sm text-gray-600">Short Cycle</div>
                                </div>
                            </div>
                            <div class="cycle-option bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-200 hover:border-purple-400 transition-all duration-300 cursor-pointer" data-value="28">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">28</div>
                                    <div class="text-sm text-gray-600">Average Cycle</div>
                                </div>
                            </div>
                            <div class="cycle-option bg-gradient-to-r from-peach-50 to-pink-50 rounded-2xl p-4 border-2 border-peach-200 hover:border-peach-400 transition-all duration-300 cursor-pointer" data-value="35">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">35</div>
                                    <div class="text-sm text-gray-600">Long Cycle</div>
                                </div>
                            </div>
                        </div>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fas fa-calendar-week text-pink-400"></i>
                            </div>
                            <input type="number" name="avg_cycle_length" required min="20" max="45"
                                   value="{{ cycle_settings.avg_cycle_length if cycle_settings else 28 }}"
                                   class="w-full pl-12 pr-4 py-4 border-2 border-pink-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 bg-white/80 backdrop-blur-sm"
                                   placeholder="Enter your cycle length (days)">
                        </div>
                    </div>
                    
                    <!-- Period Length -->
                    <div class="space-y-4">
                        <label class="block text-lg font-medium text-pink-600">
                            <i class="fas fa-calendar-check mr-2"></i>How long does your period usually last?
                        </label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="period-option bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-4 border-2 border-pink-200 hover:border-pink-400 transition-all duration-300 cursor-pointer" data-value="3">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">3</div>
                                    <div class="text-sm text-gray-600">Short Period</div>
                                </div>
                            </div>
                            <div class="period-option bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-200 hover:border-purple-400 transition-all duration-300 cursor-pointer" data-value="5">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">5</div>
                                    <div class="text-sm text-gray-600">Average Period</div>
                                </div>
                            </div>
                            <div class="period-option bg-gradient-to-r from-peach-50 to-pink-50 rounded-2xl p-4 border-2 border-peach-200 hover:border-peach-400 transition-all duration-300 cursor-pointer" data-value="7">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">7</div>
                                    <div class="text-sm text-gray-600">Long Period</div>
                                </div>
                            </div>
                        </div>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fas fa-calendar-day text-pink-400"></i>
                            </div>
                            <input type="number" name="avg_period_length" required min="1" max="10"
                                   value="{{ cycle_settings.avg_period_length if cycle_settings else 5 }}"
                                   class="w-full pl-12 pr-4 py-4 border-2 border-pink-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300 bg-white/80 backdrop-blur-sm"
                                   placeholder="Enter your period length (days)">
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="text-center pt-6">
                        <button type="submit" 
                                class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-12 py-4 rounded-2xl font-medium text-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
                            <i class="fas fa-heart mr-2"></i>Save Settings
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Tips Section -->
            <div class="mt-8">
                <div class="bg-white/60 backdrop-blur-md rounded-2xl p-6">
                    <h3 class="text-lg font-script text-pink-600 mb-4 text-center">ðŸ’¡ Helpful Tips</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600">
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                <i class="fas fa-lightbulb text-pink-500 text-xs"></i>
                            </div>
                            <span>Track for 3-6 months for more accurate predictions</span>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                <i class="fas fa-calendar-alt text-purple-500 text-xs"></i>
                            </div>
                            <span>You can update these settings anytime</span>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-peach-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                <i class="fas fa-shield-alt text-peach-500 text-xs"></i>
                            </div>
                            <span>Your data is private and secure</span>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                <i class="fas fa-bell text-pink-500 text-xs"></i>
                            </div>
                            <span>We'll send gentle reminders when needed</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Motivational Quote -->
            <div class="mt-6 text-center">
                <div class="bg-white/60 backdrop-blur-md rounded-2xl p-4 inline-block">
                    <p class="text-pink-600 font-script italic text-lg">
                        "Understanding your cycle is the first step to empowerment ðŸŒ¸"
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Custom CSS for 3D animations -->
<style>
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        25% { transform: translateY(-10px) rotate(5deg); }
        50% { transform: translateY(-20px) rotate(0deg); }
        75% { transform: translateY(-10px) rotate(-5deg); }
    }
    
    @keyframes sparkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
    }
    
    .floating-heart-1 {
        animation: float 6s ease-in-out infinite;
        animation-delay: 0s;
    }
    
    .floating-heart-2 {
        animation: float 8s ease-in-out infinite;
        animation-delay: 1s;
    }
    
    .floating-heart-3 {
        animation: float 7s ease-in-out infinite;
        animation-delay: 2s;
    }
    
    .floating-heart-4 {
        animation: float 9s ease-in-out infinite;
        animation-delay: 3s;
    }
    
    .floating-heart-5 {
        animation: float 5s ease-in-out infinite;
        animation-delay: 4s;
    }
    
    .card-hover {
        transition: all 0.3s ease;
    }
    
    .card-hover:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 25px 50px rgba(236, 72, 153, 0.2);
    }
    
    /* Input Focus Effects */
    input:focus {
        transform: scale(1.02);
        box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
    }
    
    /* Option Selection Effects */
    .cycle-option.selected, .period-option.selected {
        border-color: #ec4899;
        background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(236, 72, 153, 0.2);
    }
    
    .cycle-option:hover, .period-option:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(236, 72, 153, 0.15);
    }
    
    /* Sparkle Animation */
    .sparkle {
        animation: sparkle 2s ease-in-out infinite;
    }
</style>

<!-- JavaScript for enhanced interactions -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add sparkle effect to form inputs
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('sparkle');
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('sparkle');
        });
    });
    
    // Cycle length option selection
    const cycleOptions = document.querySelectorAll('.cycle-option');
    const cycleInput = document.querySelector('input[name="avg_cycle_length"]');
    
    cycleOptions.forEach(option => {
        option.addEventListener('click', function() {
            // Remove selected class from all options
            cycleOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Add selected class to clicked option
            this.classList.add('selected');
            
            // Update input value
            cycleInput.value = this.dataset.value;
        });
    });
    
    // Period length option selection
    const periodOptions = document.querySelectorAll('.period-option');
    const periodInput = document.querySelector('input[name="avg_period_length"]');
    
    periodOptions.forEach(option => {
        option.addEventListener('click', function() {
            // Remove selected class from all options
            periodOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Add selected class to clicked option
            this.classList.add('selected');
            
            // Update input value
            periodInput.value = this.dataset.value;
        });
    });
    
    // Auto-select options based on current values
    const currentCycleLength = cycleInput.value;
    const currentPeriodLength = periodInput.value;
    
    cycleOptions.forEach(option => {
        if (option.dataset.value === currentCycleLength) {
            option.classList.add('selected');
        }
    });
    
    periodOptions.forEach(option => {
        if (option.dataset.value === currentPeriodLength) {
            option.classList.add('selected');
        }
    });
    
    // Add ripple effect to buttons
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
});

// Add ripple effect CSS
const style = document.createElement('style');
style.textContent = `
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %} 